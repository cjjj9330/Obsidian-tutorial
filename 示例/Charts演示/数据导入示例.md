# 数据导入示例

本文档展示了如何在 Obsidian Charts 插件中从外部数据源导入数据，包括 CSV 文件和 Dataview 查询。

## 从 CSV 文件导入数据

Charts 插件支持从 CSV 文件导入数据，这对于处理大量数据特别有用。

### 创建 CSV 文件

首先，我们需要创建一个 CSV 文件。以下是一个示例 CSV 文件的内容，保存为 `月度销售数据.csv`：

```
月份,销售额,成本,利润
一月,12000,7000,5000
二月,19000,11000,8000
三月,15000,9000,6000
四月,25000,14000,11000
五月,22000,12500,9500
六月,30000,16000,14000
```

### 使用 CSV 数据创建图表

**实际使用的图表（基础格式，确保能正常显示）：**

```chart
type: line
labels: [一月, 二月, 三月, 四月, 五月, 六月]
series:
  - title: 销售额
    data: [12000, 19000, 15000, 25000, 22000, 30000]
  - title: 成本
    data: [7000, 11000, 9000, 14000, 12500, 16000]
  - title: 利润
    data: [5000, 8000, 6000, 11000, 9500, 14000]
options:
  title:
    display: true
    text: 月度销售数据分析
  scales:
    y:
      beginAtZero: true
      title:
        display: true
        text: 金额 (元)
```

**理想的CSV导入语法（供参考，可能需要特定版本的Charts插件）：**

```
type: line
csvFile: "月度销售数据.csv"
labelColumn: "月份"
dataColumns: ["销售额", "成本", "利润"]
options:
  title:
    display: true
    text: 月度销售数据分析
  scales:
    y:
      beginAtZero: true
      title:
        display: true
        text: 金额 (元)
```

### CSV 导入代码说明

- `csvFile` - 指定 CSV 文件的路径（相对于当前笔记）
- `labelColumn` - 指定用作标签（X 轴）的列名
- `dataColumns` - 指定要显示的数据列名
- 如果 CSV 文件包含标题行，插件会自动识别列名

**注意**: CSV 导入功能可能需要特定版本的 Charts 插件或额外配置。如果上述语法不工作，请使用基础格式手动输入数据。

## 从 Dataview 查询导入数据

如果你安装了 Dataview 插件，Charts 插件可以直接使用 Dataview 查询的结果创建图表。

### 准备带有 YAML 前置元数据的笔记

假设你有一些笔记，每个笔记包含以下 YAML 前置元数据：

```yaml
---
title: 每日学习记录
date: 2025-06-01
study_hours: 4
exercise_hours: 1
reading_hours: 2
---
```

### 使用 Dataview 查询创建图表

**实际使用的图表（基础格式，确保能正常显示）：**

```chart
type: bar
labels: [2025-06-01, 2025-06-02, 2025-06-03, 2025-06-04, 2025-06-05]
series:
  - title: 学习时间
    data: [4, 3.5, 5, 4.5, 6]
  - title: 运动时间
    data: [1, 1.5, 1, 2, 1.5]
  - title: 阅读时间
    data: [2, 2.5, 1.5, 3, 2]
options:
  title:
    display: true
    text: 每日时间分配
  scales:
    y:
      stacked: true
      beginAtZero: true
      title:
        display: true
        text: 小时
```

**理想的Dataview查询语法（供参考，可能需要特定版本的Charts插件）：**

```
type: bar
dataviewQuery: "TABLE date, study_hours, exercise_hours, reading_hours FROM \"示例/Charts演示/日常记录\" SORT date ASC"
labelColumn: "date"
dataColumns: ["study_hours", "exercise_hours", "reading_hours"]
options:
  title:
    display: true
    text: 每日时间分配
  scales:
    y:
      stacked: true
      beginAtZero: true
      title:
        display: true
        text: 小时
```

### Dataview 查询代码说明

- `dataviewQuery` - 指定 Dataview 查询语句
- `labelColumn` - 指定用作标签的列名
- `dataColumns` - 指定要显示的数据列名
- 查询结果必须是表格形式

**注意**: Dataview 集成功能可能需要特定版本的 Charts 插件或额外配置。如果上述语法不工作，请使用基础格式手动输入数据。

## 动态数据更新

Charts 插件会自动监听数据源的变化，当 CSV 文件或 Dataview 查询结果发生变化时，图表会自动更新。

## 基础示例（推荐使用）

以下基础示例使用标准的Charts插件语法，保证在大多数情况下都能正常工作：

### 简单柱状图

```chart
type: bar
labels: [一月, 二月, 三月, 四月, 五月, 六月]
series:
  - title: 销售额
    data: [12000, 19000, 15000, 25000, 22000, 30000]
  - title: 成本
    data: [7000, 11000, 9000, 14000, 12500, 16000]
  - title: 利润
    data: [5000, 8000, 6000, 11000, 9500, 14000]
options:
  title:
    display: true
    text: 月度销售数据分析
  scales:
    y:
      beginAtZero: true
      title:
        display: true
        text: 金额 (元)
```

### 时间序列折线图

```chart
type: line
labels: [一月, 二月, 三月, 四月, 五月, 六月]
series:
  - title: 学习时间
    data: [4.5, 5.2, 6.1, 4.8, 5.5, 6.3]
    borderColor: "#3e95cd"
    fill: false
  - title: 锻炼时间
    data: [1.2, 1.5, 2.1, 1.8, 2.3, 2.0]
    borderColor: "#8e5ea2"
    fill: false
  - title: 阅读时间
    data: [2.3, 2.8, 2.5, 3.1, 2.9, 3.2]
    borderColor: "#3cba9f"
    fill: false
options:
  title:
    display: true
    text: 每日时间分配追踪
  scales:
    y:
      beginAtZero: true
      title:
        display: true
        text: 小时
```

## 高级数据处理

### 数据转换示例

如果你需要对数据进行预处理，可以使用以下方式：

```chart
type: line
labels: [一月, 二月, 三月, 四月, 五月, 六月]
series:
  - title: 销售额（万元）
    data: [1.2, 1.9, 1.5, 2.5, 2.2, 3.0]
  - title: 成长率（%）
    data: [0, 58.3, -21.1, 66.7, -12.0, 36.4]
    type: line
    yAxisID: percent
options:
  title:
    display: true
    text: 销售数据与成长率分析
  scales:
    y:
      beginAtZero: true
      title:
        display: true
        text: 销售额（万元）
    percent:
      position: right
      title:
        display: true
        text: 成长率（%）
      grid:
        drawOnChartArea: false
```

### 多维度数据分析

```chart
type: radar
labels: [产品质量, 客户服务, 价格竞争力, 市场营销, 技术创新, 品牌影响力]
series:
  - title: 我们公司
    data: [8, 7, 6, 5, 9, 7]
    backgroundColor: "rgba(255, 99, 132, 0.2)"
    borderColor: "rgba(255, 99, 132, 1)"
  - title: 竞争对手A
    data: [6, 8, 8, 7, 6, 8]
    backgroundColor: "rgba(54, 162, 235, 0.2)"
    borderColor: "rgba(54, 162, 235, 1)"
  - title: 竞争对手B
    data: [7, 6, 7, 8, 7, 6]
    backgroundColor: "rgba(255, 206, 86, 0.2)"
    borderColor: "rgba(255, 206, 86, 1)"
options:
  title:
    display: true
    text: 市场竞争力分析
  scales:
    r:
      beginAtZero: true
      max: 10
      pointLabels:
        fontSize: 12
```

## 数据聚合示例

```chart
type: pie
labels: [第一季度, 第二季度]
series:
  - title: 季度销售额分布
    data: [46000, 77000]
    backgroundColor: ["#ff6384", "#36a2eb"]
options:
  title:
    display: true
    text: 半年度销售额分布
  plugins:
    legend:
      position: bottom
```

## 实用技巧

### 使用说明

1. **基础图表**：直接使用 `labels` 和 `series` 数组定义数据（推荐）
2. **CSV 导入**：使用 `csvFile`、`labelColumn` 和 `dataColumns` 从 CSV 文件导入数据（需要支持此功能的插件版本）
3. **Dataview 查询**：使用 `dataviewQuery`、`labelColumn` 和 `dataColumns` 从 Dataview 查询导入数据（需要Dataview插件和兼容版本）
4. **图表选项**：使用 `options` 对象配置图表的标题、坐标轴、颜色等属性

### 故障排除

如果某个图表无法显示，请检查：
- 图表类型（`type`）是否正确
- 数据格式是否符合要求
- 文件路径是否正确（对于 CSV 和 Dataview 查询）
- Charts插件是否支持高级功能（如CSV导入、Dataview集成）

当高级功能不可用时，建议使用基础格式手动输入数据，这样可以确保图表正常显示。
