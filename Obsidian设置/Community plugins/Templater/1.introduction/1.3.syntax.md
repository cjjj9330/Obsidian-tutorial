# 语法

[Templater](https://github.com/SilentVoid13/Templater)使用自定义模板引擎([rusty_engine](https://github.com/SilentVoid13/rusty_engine))语法来声明命令。您可能需要一些时间来适应它，但一旦掌握了要点，语法就不那么难了。

所有Templater的函数都是使用**命令**调用的JavaScript对象。

## 命令语法

命令**必须**具有开始标签`和结束标签`。

使用`tp.date.now`内部函数的完整命令是：`2025-05-28`

## 函数语法

### 对象层次结构

所有Templater的函数，无论是内部函数还是用户函数，都在`tp`对象下可用。您可以说我们所有的函数都是`tp`对象的子对象。要访问对象的"子对象"，我们必须使用点号表示法`.`

这意味着Templater函数调用将始终以`tp.<something>`开头

#### 函数调用

要调用函数，我们需要使用函数调用的特定语法：在函数名称后面添加开括号和闭括号。

例如，我们使用`tp.date.now()`来调用`tp.date.now`内部函数。

函数可以有参数和可选参数。它们被放置在开括号和闭括号之间，如下所示：

```javascript
tp.date.now(arg1_value, arg2_value, arg3_value, ...)
```

所有参数必须按正确顺序传递。

函数的参数可以有不同的**类型**。以下是函数可能类型的非详尽列表：

- `string`类型意味着值必须放在单引号或双引号内（`"value"`或`'value'`）
- `number`类型意味着值必须是整数（`15`、`-5`、...）
- `boolean`类型意味着值必须是`true`或`false`（完全小写），不能是其他值。

调用函数时必须遵守参数的类型，否则不会工作。

### 函数文档语法

Templater内部函数的文档使用以下语法：

```javascript
tp.<my_function>(arg1_name: type, arg2_name?: type, arg3_name: type = <default_value>, arg4_name: type1|type2, ...)
```

其中：

- `arg_name`表示参数的**符号**名称，用于理解它是什么。
- `type`表示参数的预期类型。调用内部函数时必须遵守此类型，否则会抛出错误。

如果参数是可选的，它将附加问号`?`，例如`arg2_name?: type`

如果参数有默认值，将使用等号`=`指定，例如`arg3_name: type = <default_value>`。

如果参数可以有不同类型，将使用管道符`|`指定，例如`arg4_name: type1|type2`

#### 语法警告

请注意，此语法仅用于文档目的，以便能够理解函数期望的参数。

调用函数时，您不能指定参数的名称、类型或默认值。只需要参数的值，如[这里](1.3.syntax.md#function-invocation)所解释的

##### 示例

让我们以`tp.date.now`内部函数文档为例：

```
tp.date.now(format?: string = "YYYY-MM-DD", offset?: number|string, reference?: string, reference_format?: string)
```

此内部函数有4个可选参数：

- 类型为`string`的format，默认值为`"YYYY-MM-DD"`。
- 类型为`number`或`string`的offset。
- 类型为`string`的reference。
- 类型为`string`的reference_format。

这意味着此内部函数的**有效调用**是：

- `2025-05-28`
- `2025-06-04`
- `2021-04-16`
- `Thursday, January 1st 0004` *假设文件名格式为："YYYY-MM-DD"

另一方面，**无效调用**是：

- `tp.date.now(format: string = "YYYY-MM-DD")`
- `tp.date.now(format: string = "YYYY-MM-DD", offset?: 0)`
